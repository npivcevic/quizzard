<div class="main-frame">

    <div class="top-bar">

        <div class="domain "><a [routerLink]="['/']">PubKviz.HR</a></div>


    </div>

    <div class="body" *ngIf="quizPlayerService.startQuiz; then thenBlock else elseBlock"></div>

        <ng-template #elseBlock  class="join-group-code">
            <mat-card class="join-group-code-card-title">
                <mat-card-title style="text-align: center;">
                    <mat-card>
                        Prijavi se
                    </mat-card>
                </mat-card-title>
                <mat-card-content>
                    <mat-card class="enter-credentials-card">
                        <div>
                            <mat-form-field style="width: 100%; text-align: center;" appearance="outline">
                                <input matInput placeholder="Unesi kod" name="quizGroupName" [(ngModel)]="quizGroupName" required>
                            </mat-form-field>
                            <br />
                            <mat-form-field style="width: 100%; text-align: center;" appearance="outline">
                                <input matInput placeholder="Unesi ime" name="playerName" [(ngModel)]="playerName" required>
                            </mat-form-field>
                            <br />
                            <button class="join-group-button" color="primary" mat-stroked-button (click)="joinQuiz()">Join Quiz</button>
                        </div>
                    </mat-card>
                </mat-card-content>
            </mat-card>
        </ng-template>

    <ng-template #thenBlock>
        <div *ngIf="quizPlayerService.currentquestion" >
            <mat-card style="text-align: center;">
                {{quizPlayerService.currentquestion.text}}
            </mat-card>
            <div style="display: flex; flex-wrap: wrap; ">
                <div *ngFor="let answer of quizPlayerService.currentquestion.answers; let i = index" style="width: 50%;">
                    <mat-card>
                       <button 
                       style="width: 100%;" 
                       [ngStyle]="{background:answer.id===quizPlayerService.correctAnswerId ? 'rgb(153, 211, 153)':'' }"
                       mat-stroked-button [disabled]="quizPlayerService.answerIsSelected" 
                       (click)="sendAnswerToHost(answer.id)">
                       {{answer.text}}
                       </button>
                    </mat-card>
                </div>
            </div>
        </div>
    </ng-template>


<div class="log">
    Activity Log:
    <mat-divider></mat-divider>
    <div *ngFor="let message of quizPlayerService.signalRService.dataHistory">
        {{message}}
    </div>
</div>


<div>
    ConnectionId: {{quizPlayerService.signalRService.connectionId}}
</div>

<div>
    <input matInput name="question" [(ngModel)]="inputData" required>
    <button class="general-buttons" color="primary" mat-raised-button (click)="sendDataToHost()">
        Send data to host
    </button>
</div>

<div>
    Messages received:
    <div *ngFor="let message of quizPlayerService.signalRService.dataHistory">
        {{message}}
    </div>
</div>